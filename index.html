<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wholesale Configurator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Animation Keyframes */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 80% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes confetti { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }
        @keyframes driveTruck { 0% { transform: translateX(-150%); } 100% { transform: translateX(150vw); } }
        @keyframes spinWheel { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        .animate-slideIn { animation: slideIn 0.3s ease-out; }
        .animate-popIn { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .animate-confetti { animation: confetti linear forwards; }
        .animate-driveTruck { animation: driveTruck 4s linear infinite; }
        .animate-spinWheel { animation: spinWheel 0.5s linear infinite; }
        
        /* Utility for hiding scrollbar but keeping functionality */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-900 flex justify-center overflow-hidden min-h-screen">

    <div id="app" class="w-full max-w-md bg-white shadow-2xl relative h-screen flex flex-col">
        
        <!-- Top Navigation Bar -->
        <header class="flex items-center justify-between px-4 py-3 bg-white border-b border-gray-100 z-10 shrink-0">
            <div class="flex items-center gap-2">
                <div class="w-6 h-4 bg-red-600 relative rounded-sm overflow-hidden shadow-sm">
                    <div class="absolute top-0.5 left-0.5 text-[4px] text-yellow-400">‚òÖ</div>
                </div>
            </div>
            <nav class="flex gap-3 text-[10px] font-medium text-gray-600 uppercase tracking-tight">
                <span class="hover:text-black cursor-pointer">Pallets</span>
                <span class="hover:text-black cursor-pointer">Benefits</span>
                <span class="hover:text-black cursor-pointer">Contacts</span>
                <span class="font-bold text-black cursor-pointer">Order</span>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="flex-1 relative overflow-y-auto bg-white no-scrollbar">
            <!-- Steps will be injected here by JavaScript -->
        </main>

        <!-- Bottom Bar -->
        <div class="bg-[#f8f8f8] border-t border-gray-200 px-4 py-3 flex justify-between items-center text-gray-500 shrink-0">
            <i data-lucide="chevron-left" class="w-6 h-6"></i>
            <div class="flex gap-6">
                <i data-lucide="share" class="w-5 h-5"></i>
                <i data-lucide="book-open" class="w-5 h-5"></i>
                <i data-lucide="copy" class="w-5 h-5"></i>
            </div>
        </div>

    </div>

    <script>
        // State
        let step = 1;
        let weight = 28;
        let cart = [];
        const phones = [
            { id: 1, name: 'Titanium Silver', image: 'https://i.ibb.co/nM1TBYBQ/17pro-Max-Silver-1.png', bg: 'bg-gray-100' },
            { id: 2, name: 'Deep Blue', image: 'https://i.ibb.co/hRgw1wkq/17pro-Max-Deep-Blue-1.png', bg: 'bg-blue-50' },
            { id: 3, name: 'Lavender', image: 'https://i.ibb.co/qLr2yf19/17pro-Lavander-1.png', bg: 'bg-purple-50' },
            { id: 4, name: 'Sage Green', image: 'https://i.ibb.co/xKWg0R27/17pro-Sage-1.png', bg: 'bg-green-50' },
            { id: 5, name: 'Cosmic Orange', image: 'https://i.ibb.co/0y4ZVXQD/17pro-Max-Cosmic-Orange-1.png', bg: 'bg-orange-50' },
        ];

        // SVGs
        const appleLogoSvg = `<svg viewBox="0 0 24 24" fill="currentColor" class="w-3 h-3 text-black opacity-80"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.5 1.3 0 2.18.88 3.16.88.96 0 2.75-1.05 4.54-1 2.16.11 3.55 1.09 4.34 2.18-3.4 1.77-2.6 6.32 1.48 8.08-.28.78-.66 1.54-1.63 2.97zM15.5 5.55c.73-.89 1.21-2.13 1.08-3.37-1.04.04-2.3.69-3.05 1.56-.67.79-1.25 2.06-1.09 3.28 1.15.09 2.34-.58 3.06-1.47z"/></svg>`;
        
        const cloudIconSvg = (cls) => `<svg viewBox="0 0 24 24" fill="currentColor" class="${cls}"><path d="M17.5,19c-0.83,0-1.5-0.67-1.5-1.5c0-0.83,0.67-1.5,1.5-1.5c1.28,0,2.36-0.93,2.48-2.16l0.05-0.5l0.49-0.1 c1.26-0.27,2.16-1.38,2.16-2.68c0-1.52-1.23-2.75-2.75-2.75c-0.18,0-0.35,0.02-0.52,0.06L18.8,8.04l-0.38-0.56 C17.48,6.1,15.86,5.25,14.12,5.25c-2.52,0-4.72,1.72-5.32,4.17L8.66,10.01l-0.6,0.05C6.1,10.22,4.62,11.89,4.62,13.91 c0,2.14,1.66,3.9,3.77,4.08C8.5,18.01,8.62,18.12,8.62,18.25c0,0.41-0.34,0.75-0.75,0.75c-2.91-0.26-5.12-2.7-5.12-5.63 c0-2.66,1.86-4.94,4.45-5.46c0.69-2.92,3.31-4.97,6.33-4.97c2.19,0,4.24,1.07,5.55,2.91c0.26-0.05,0.53-0.08,0.81-0.08 c2.34,0,4.25,1.91,4.25,4.25c0,1.99-1.39,3.69-3.26,4.1C20.89,17.45,19.34,19,17.5,19z"/></svg>`;

        // Preload Images
        phones.forEach(phone => {
            const img = new Image();
            img.src = phone.image;
        });

        // App Logic
        function render() {
            const main = document.getElementById('main-content');
            main.innerHTML = ''; // Clear content

            if (step === 1) renderStep1(main);
            else if (step === 2) renderStep2(main);
            else if (step === 3) renderStep3(main);
            else if (step === 4) renderStep4(main);
            else if (step === 5) renderStep5(main);

            // Re-initialize icons
            lucide.createIcons();
        }

        // --- Step 1: Pallet Selection ---
        function renderStep1(container) {
            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-col h-full p-6 animate-fadeIn';
            
            wrapper.innerHTML = `
                <h1 class="text-2xl font-bold text-center mb-8 mt-4">Choose Your Pallet</h1>
                <div class="flex flex-col items-center justify-center flex-1">
                    <div class="text-4xl font-black mb-6" id="weight-display">${weight} KG</div>
                    <input type="range" min="28" max="100" value="${weight}" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-black mb-16" id="weight-slider">
                    
                    <div class="relative w-full flex flex-col justify-end items-center h-80 mb-8">
                        <div class="absolute top-10 right-8 animate-bounce pointer-events-none opacity-80 z-30">
                            <span class="text-4xl">üëÜüèº</span>
                        </div>
                        <div class="flex flex-col-reverse items-center mb-[2px]" id="box-stack">
                            ${generateBoxStackHTML()}
                        </div>
                        <div class="relative z-0">
                            <div class="w-56 h-3 bg-[#e8c382] border-b border-[#c49a55] flex justify-between px-2 rounded-t-sm">
                                <div class="w-1 h-full bg-[#c49a55]/20"></div><div class="w-1 h-full bg-[#c49a55]/20"></div>
                                <div class="w-1 h-full bg-[#c49a55]/20"></div><div class="w-1 h-full bg-[#c49a55]/20"></div>
                            </div>
                            <div class="w-56 h-8 flex justify-between items-start px-3 bg-transparent">
                                <div class="w-6 h-8 bg-[#d4a76a] border-r border-b border-l border-[#8b5a2b] relative"><div class="absolute inset-0 bg-black/10"></div></div>
                                <div class="w-6 h-8 bg-[#d4a76a] border-r border-b border-l border-[#8b5a2b] relative"><div class="absolute inset-0 bg-black/10"></div></div>
                                <div class="w-6 h-8 bg-[#d4a76a] border-r border-b border-l border-[#8b5a2b] relative"><div class="absolute inset-0 bg-black/10"></div></div>
                            </div>
                            <div class="absolute bottom-0 w-56 h-2 bg-[#d4a76a] border border-[#8b5a2b] rounded-sm flex items-center justify-center">
                                <div class="w-full h-px bg-[#8b5a2b]/30"></div>
                            </div>
                        </div>
                        <div class="w-64 h-4 bg-black/10 rounded-[100%] blur-sm mt-1"></div>
                    </div>
                </div>
                <button id="btn-continue-1" class="w-full bg-black text-white py-4 rounded-xl text-lg font-bold tracking-wide mt-auto hover:bg-gray-800 transition-colors uppercase shadow-lg active:scale-95 transform duration-150">
                    Continue
                </button>
            `;

            container.appendChild(wrapper);

            // Listeners
            const slider = document.getElementById('weight-slider');
            const display = document.getElementById('weight-display');
            const stack = document.getElementById('box-stack');

            slider.addEventListener('input', (e) => {
                weight = parseInt(e.target.value);
                display.innerText = `${weight} KG`;
                stack.innerHTML = generateBoxStackHTML();
            });

            document.getElementById('btn-continue-1').addEventListener('click', () => {
                step = 2;
                render();
            });
        }

        function generateBoxStackHTML() {
            const rows = Math.floor(weight / 8);
            let html = '';
            for (let i = 0; i < rows; i++) {
                html += `
                <div class="flex justify-center items-end -mb-1 relative z-10 transition-all duration-300" style="z-index: ${20 - i}">
                    <div class="w-16 h-5 bg-white border border-gray-300 relative shadow-sm mx-[1px] flex items-center justify-center">${appleLogoSvg}</div>
                    <div class="w-16 h-5 bg-white border border-gray-300 relative shadow-sm mx-[1px] flex items-center justify-center">${appleLogoSvg}</div>
                    <div class="w-16 h-5 bg-white border border-gray-300 relative shadow-sm mx-[1px] flex items-center justify-center">${appleLogoSvg}</div>
                </div>`;
            }
            return html;
        }

        // --- Step 2: Phone Selection ---
        function renderStep2(container) {
            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-col h-full animate-slideIn';

            let phonesHtml = phones.map(phone => `
                <div class="relative group">
                    <div class="${phone.bg} aspect-[3/4] rounded-3xl border border-gray-100 shadow-sm flex flex-col items-center justify-center relative overflow-hidden transition-all duration-200 active:scale-95">
                        <div class="relative w-full h-full flex items-center justify-center">
                            <!-- Loader -->
                            <div class="absolute inset-0 flex items-center justify-center bg-gray-50/50 z-10 loader-container">
                                <i data-lucide="loader-2" class="w-8 h-8 text-gray-300 animate-spin"></i>
                            </div>
                            <img src="${phone.image}" alt="${phone.name}" 
                                class="w-full h-full object-contain p-4 hover:scale-105 transition-all duration-500 drop-shadow-xl opacity-0 scale-95"
                                onload="this.classList.remove('opacity-0', 'scale-95'); this.previousElementSibling.remove()">
                        </div>
                        <div class="absolute top-3 left-0 right-0 text-center">
                            <span class="text-[10px] font-bold uppercase tracking-wider text-gray-400 bg-white/80 px-2 py-1 rounded-full backdrop-blur-sm">
                                ${phone.name}
                            </span>
                        </div>
                    </div>
                    <button onclick="addToCart(${phone.id})" class="absolute bottom-3 right-3 w-10 h-10 bg-black text-white rounded-full flex items-center justify-center shadow-lg hover:bg-gray-800 active:scale-90 transition-all z-10">
                        <span class="text-2xl leading-none mb-1">+</span>
                    </button>
                </div>
            `).join('');

            wrapper.innerHTML = `
                <div class="p-4 bg-white sticky top-0 z-20 shadow-sm border-b border-gray-100">
                    <h2 class="text-xl font-bold text-center">Select Models</h2>
                    <div class="flex justify-center items-center mt-1">
                        <div class="text-sm font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                            ${cart.length} items added
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4 p-4 pb-28 overflow-y-auto no-scrollbar">
                    ${phonesHtml}
                </div>
                
                ${cart.length > 0 ? `
                <div class="absolute bottom-24 right-4 animate-bounce">
                    <div class="relative">
                        <div class="w-16 h-16 bg-white rounded-full shadow-2xl flex items-center justify-center border border-gray-100">
                            <div class="w-10 h-10 bg-[#d4a76a] rounded-sm skew-x-12 relative flex items-end justify-center border border-[#8b5a2b]/30">
                                <span class="text-[10px] font-bold mb-1 opacity-50 text-[#5c3a1e]">STACK</span>
                            </div>
                        </div>
                        <div class="absolute -top-1 -right-1 w-7 h-7 bg-red-500 text-white rounded-full flex items-center justify-center text-sm font-bold border-2 border-white shadow-md">
                            ${cart.length}
                        </div>
                    </div>
                </div>` : ''}

                <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-white via-white to-transparent z-20">
                    <button id="btn-continue-2" class="w-full bg-black text-white py-4 rounded-xl text-lg font-bold tracking-wide uppercase shadow-lg active:scale-95 transition-transform">
                        Complete Order
                    </button>
                </div>
            `;
            
            container.appendChild(wrapper);

            document.getElementById('btn-continue-2').addEventListener('click', () => {
                step = 3;
                render();
            });
        }

        window.addToCart = (id) => {
            const phone = phones.find(p => p.id === id);
            cart.push(phone);
            render(); // Re-render to update count
        };

        // --- Step 3: Shipping Form ---
        function renderStep3(container) {
            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-col h-full p-6 animate-fadeIn bg-gray-50';
            
            wrapper.innerHTML = `
                <div class="flex-1 flex flex-col justify-center max-w-sm mx-auto w-full">
                    <div class="bg-white p-6 rounded-3xl shadow-xl border border-gray-100">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-10 h-10 bg-black text-white rounded-full flex items-center justify-center">
                                <i data-lucide="user" class="w-5 h-5"></i>
                            </div>
                            <h2 class="text-xl font-bold text-gray-900">Shipping Details</h2>
                        </div>
                        <div class="space-y-4">
                            <div class="relative group">
                                <label class="block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1">Full Name</label>
                                <div class="relative">
                                    <input type="text" value="Alex Morgan" readonly class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 pl-10 text-sm font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-black transition-all">
                                    <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"><i data-lucide="user" class="w-4 h-4"></i></div>
                                    <div class="absolute right-3 top-1/2 -translate-y-1/2 text-green-500"><i data-lucide="check" class="w-4 h-4" stroke-width="3"></i></div>
                                </div>
                            </div>
                            <div class="relative group">
                                <label class="block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1">Shipping Address</label>
                                <div class="relative">
                                    <textarea rows="3" readonly class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-3 pl-10 text-sm font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-black resize-none transition-all">4501 S Alameda St, Los Angeles, CA 90058, USA</textarea>
                                    <div class="absolute left-3 top-4 text-gray-400"><i data-lucide="map-pin" class="w-4 h-4"></i></div>
                                    <div class="absolute right-3 top-4 text-green-500"><i data-lucide="check" class="w-4 h-4" stroke-width="3"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="btn-continue-3" class="w-full bg-black text-white py-4 rounded-xl text-lg font-bold tracking-wide uppercase shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2">
                    Continue <i data-lucide="arrow-right" class="w-5 h-5"></i>
                </button>
            `;
            container.appendChild(wrapper);

            document.getElementById('btn-continue-3').addEventListener('click', () => {
                step = 4;
                render();
            });
        }

        // --- Step 4: Success / Confetti ---
        function renderStep4(container) {
            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-col items-center justify-center h-full p-6 text-center bg-gray-50 relative overflow-hidden';
            
            // Confetti
            const confettiContainer = document.createElement('div');
            confettiContainer.className = 'absolute inset-0 pointer-events-none overflow-hidden';
            for (let i = 0; i < 50; i++) {
                const conf = document.createElement('div');
                conf.className = 'absolute w-3 h-3 rounded-sm animate-confetti';
                conf.style.left = `${Math.random() * 100}%`;
                conf.style.top = '-10%';
                conf.style.backgroundColor = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'][Math.floor(Math.random() * 5)];
                conf.style.animationDelay = `${Math.random() * 2}s`;
                conf.style.animationDuration = `${2 + Math.random() * 3}s`;
                confettiContainer.appendChild(conf);
            }
            wrapper.appendChild(confettiContainer);

            // Card
            const card = document.createElement('div');
            card.className = 'relative z-10 bg-white p-8 rounded-3xl shadow-xl w-full max-w-sm flex flex-col items-center animate-popIn';
            card.innerHTML = `
                <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mb-6 shadow-sm">
                    <i data-lucide="check" class="w-12 h-12 text-green-600" stroke-width="4"></i>
                </div>
                <h2 class="text-2xl font-black text-gray-900 mb-8 uppercase leading-tight tracking-tight">
                    Find out more <br/>
                    about buying <br/>
                    <span class="text-yellow-500 bg-black px-2 py-0.5 mt-1 inline-block transform -rotate-1">Phone bundle!</span>
                </h2>
                <button id="btn-confirm" class="w-full bg-green-500 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-green-600 transition-colors mb-4 text-lg uppercase tracking-wide">
                    Confirm Order
                </button>
                <button id="btn-cancel" class="text-gray-400 text-sm font-medium hover:text-gray-600">
                    Cancel
                </button>
            `;
            wrapper.appendChild(card);
            container.appendChild(wrapper);

            document.getElementById('btn-confirm').addEventListener('click', () => {
                step = 5;
                render();
            });
            document.getElementById('btn-cancel').addEventListener('click', () => {
                step = 1;
                cart = [];
                weight = 28;
                render();
            });
        }

        // --- Step 5: Truck Animation ---
        function renderStep5(container) {
            const wrapper = document.createElement('div');
            wrapper.className = 'flex flex-col items-center justify-center h-full bg-blue-50 relative overflow-hidden';
            
            wrapper.innerHTML = `
                <div class="absolute top-10 left-0 w-full text-center px-4 animate-fadeIn">
                    <h2 class="text-3xl font-black text-gray-900 uppercase tracking-tighter">Order Confirmed!</h2>
                    <p class="text-gray-500 mt-2 font-medium">Your pallet is on its way.</p>
                </div>

                <!-- Road -->
                <div class="absolute bottom-0 w-full h-32 bg-gray-800 border-t-4 border-gray-600">
                    <div class="absolute top-1/2 left-0 w-full border-t-2 border-dashed border-yellow-400 opacity-70"></div>
                </div>

                <!-- Clouds -->
                <div class="absolute top-20 right-10 opacity-30 animate-pulse">
                    ${cloudIconSvg('w-24 h-12 text-white')}
                </div>
                <div class="absolute top-32 left-10 opacity-20">
                    ${cloudIconSvg('w-16 h-8 text-white')}
                </div>

                <!-- Truck -->
                <div class="absolute bottom-16 animate-driveTruck w-64">
                    <div class="relative">
                        <!-- Body -->
                        <div class="w-48 h-24 bg-red-600 rounded-lg relative shadow-xl border-2 border-red-700 flex items-center justify-center">
                            <span class="text-white font-black italic text-xl tracking-widest opacity-90">EXPRESS</span>
                            <div class="absolute top-0 right-0 w-full h-1/2 bg-gradient-to-b from-white/20 to-transparent rounded-t-lg"></div>
                        </div>
                        <!-- Cab -->
                        <div class="absolute bottom-0 -right-16 w-20 h-20 bg-red-600 rounded-r-xl border-t-2 border-r-2 border-b-2 border-red-700">
                            <div class="absolute top-2 right-2 w-12 h-10 bg-blue-300 rounded-tr-lg border border-blue-400 overflow-hidden">
                                <div class="absolute -bottom-4 -left-2 w-10 h-20 bg-white/30 rotate-45"></div>
                            </div>
                            <div class="absolute bottom-2 right-0 w-2 h-4 bg-yellow-400 rounded-l-sm shadow-lg animate-pulse"></div>
                        </div>
                        <!-- Hitch -->
                        <div class="absolute bottom-2 -right-1 w-4 h-4 bg-gray-800"></div>
                        <!-- Wheels -->
                        <div class="absolute -bottom-6 left-6 w-10 h-10 bg-gray-900 rounded-full border-4 border-gray-400 flex items-center justify-center animate-spinWheel">
                            <div class="w-4 h-4 bg-gray-500 rounded-full border border-gray-600"></div>
                        </div>
                        <div class="absolute -bottom-6 left-28 w-10 h-10 bg-gray-900 rounded-full border-4 border-gray-400 flex items-center justify-center animate-spinWheel">
                            <div class="w-4 h-4 bg-gray-500 rounded-full border border-gray-600"></div>
                        </div>
                        <div class="absolute -bottom-6 -right-10 w-12 h-12 bg-gray-900 rounded-full border-4 border-gray-400 flex items-center justify-center animate-spinWheel">
                            <div class="w-5 h-5 bg-gray-500 rounded-full border border-gray-600"></div>
                        </div>
                    </div>
                    <!-- Wind -->
                    <div class="absolute top-0 -left-10 space-y-2 opacity-50">
                        <div class="w-12 h-0.5 bg-gray-400"></div>
                        <div class="w-8 h-0.5 bg-gray-400 translate-x-4"></div>
                    </div>
                </div>
            `;
            container.appendChild(wrapper);
        }

        // Initialize Icons for initial static parts
        lucide.createIcons();
        
        // Start App
        render();

    </script>
</body>
</html>
